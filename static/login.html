<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Веселые игры</title>
    <link rel="stylesheet"  href="{{ url_for('static', filename='styles/login.css') }}">
    <link rel="stylesheet" href='styles/login.css'>
    
</head>
<body>
    <main class="game_auth_body">
        <div class="game_auth">
            <h1>Веселые игры. Пульт игрока.</h1>
            <div class="game_auth_container">
                <form action="/join" method="post" class="auth">
                <div class="form_group">
                    <label class="form_label">Аккаунт в Telegram</label>
                    <div>
                        <p>
                           <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="mokaque_bot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
                            <script type="text/javascript">
                            function onTelegramAuth(user) {
			    console.log(user);
                        if (user.username!=undefined)
                            document.getElementById("name").value = user.username;
                        else
                            if (user.last_name!=undefined)
                                document.getElementById("name").value = user.first_name+' ' + user.last_name;
                            else
                                document.getElementById("name").value = user.first_name
                        }
</script>
                        </p>
                        <input class="form_control" type="text" id="name" name="user_name" placeholder="@user" required>
                    </div>
                </div>
                <div class="form_group">
                    <label class="form_label">Код игровой комнаты</label>
                    <div>
                        <input class="form_control" id="room", name="room_id" type="text" maxlength="8" placeholder="1234" required>
                    </div>
                </div>
                <input type="submit" class="submit" value="Войти"/>
                </form>
                {%for msg in get_flashed_messages()%}
                <div class="flash">{{msg}}</div>
                {%endfor%}
            </div>
        </div>


    </main>
    <!--script src="/static/login/join.js"></script-->

</body>
</html>
